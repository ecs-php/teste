{"version":3,"sources":["home.js"],"names":["$home","Vue","el","data","title","tasks","loadTasks","methods","this","$","val","_this","$term","term","r","get","results","addTask","post","openTask","id","filter","i","modal","deleteTask","ajax","method","url","alert","mounted","document","ev","preventDefault","itemId","attr","$this","find","on","serialize"],"mappings":"aAAA,IAAIA,MAAQ,IAAIC,KACdC,GAAI,4BADNC,MACED,MAAI,QACJC,gBACEC,UAEAC,SALgBC,UAAA,WAOlBC,IAAAA,EAASC,KACPF,EAAWG,EAAA,eAAAC,MAETC,EAAIC,MAAU,mBAEdD,EAAAA,IAAMP,cAAQS,KAAAD,GAAd,SAAAE,GAGEH,EAAMP,MAAQ,QADdW,EAAIV,MAAAS,EAANE,WAIDC,QAXM,SAAAd,GAcLM,EAAES,KAAK,cAAef,EAAM,SAAUW,GADxCG,MAASX,eAIRa,SAjBM,SAAAC,GAoBL,IAAIT,EAAQH,KADdW,EAAAA,aAAUR,EAAUS,MAAIC,OAAA,SAAAC,GAAA,OAAAA,EAAAF,IAAAA,IAAA,GAEtBT,EAAAA,kBAAAY,MAAqBZ,SAKvBa,WAAY,SAAUJ,GA1BfX,EAAAgB,MA6BHC,OAAQ,SAHZF,IAAAA,cACErB,MACEsB,GAAKL,GAELO,QAAK,SAFAb,GAGC,GAAAA,GACJM,EAAIA,kBAAAA,MAAAA,QAJDpB,MAAAM,aAMIsB,MAAA,iDAKRC,QAAA,WAXIrB,KAAPF,eAgBFG,EAAAqB,UAAKxB,GAAAA,QAAL,4BAAA,SAAAyB,GACDA,EAAAC,iBApDH,IAAAC,EAAAxB,EAAAD,MAAA0B,KAAA,YA0DElC,MAAMmB,SAASc,KADfxB,EAAAqB,UAAIG,GAASxB,QAAQyB,8BAArB,SAAAH,GACA/B,EAAAA,iBAHFS,EAAAD,MAAA,IASMyB,EAASxB,EAAED,MAAM0B,KAAK,YAH1BJ,QAAF,iBACEC,MAAGC,WAAHC,KAIEjC,EAAAA,UAAMwB,GAAAA,SAAWS,sBAAjB,SAAAF,GACDA,EAAAC,iBANH,IAAAG,EAAA1B,EAAAD,MAYMY,EAAKe,EAAMC,KAAK,eAAe1B,MAFnCqB,EAAAA,MACAL,OAAIS,MACJhC,KAAIiB,EAAKe,YAKPR,IAAK,cAAgBP,EAHrBK,QAAK,SAAAX,GACG,GAARY,GACAvB,EAAMgC,kBAFDZ,MAAA,QAGLI,MAAKrB,aAEHsB,MAAId,4CAMLL,EAAAqB,UAAAO,GAAA,SAAA,eAAA,SAAAN,GAXIA,EAAPC,iBALF,IAAAG,EAAA1B,EAAAD,MAoBEsB,MAAAA,QAAaK,EAAAG,eAOf7B,EAAEqB,UAAUO,GAAG,QAAS,cAAe,SAAUN,GAH/C/B,MAAMiB","file":"home.js","sourcesContent":["var $home = new Vue({\r\n  el: '.page-home,#taskEditModal',\r\n  data: {\r\n    title: 'Tasks',\r\n    selectedTask: {},\r\n    tasks: []\r\n  },\r\n  methods: {\r\n    loadTasks: function () {\r\n      var _this = this;\r\n      var $term = $('#taskSearch').val();\r\n\r\n      _this.title = 'Loading Tasks...';\r\n\r\n      $.get('./api/Task', {term: $term}, function (r) {\r\n        _this.title = 'Tasks';\r\n        _this.tasks = r.results;\r\n      });\r\n    },\r\n\r\n    addTask: function(data) {\r\n      $.post('./api/Task/', data, function (r) {\r\n        $home.loadTasks();\r\n      });\r\n    },\r\n\r\n    openTask: function (id) {\r\n      var _this = this;\r\n      _this.selectedTask = _this.tasks.filter(i => i.id == id)[0];\r\n\r\n      $('#taskEditModal').modal('show');\r\n    },\r\n\r\n    deleteTask: function (id) {\r\n      var _this = this;\r\n      $.ajax({\r\n        method: 'DELETE',\r\n        url: './api/Task/',\r\n        data: {\r\n          id: id\r\n        },\r\n        success: function(r) {\r\n          if (r == 1) {\r\n            $('#taskEditModal').modal('hide');\r\n            $home.loadTasks();\r\n          } else alert('Whoops, looks like something went wrong;')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.loadTasks();\r\n  },\r\n});\r\n\r\n$(document).on('click', '[data-action=\"edit-task\"]', function (ev){\r\n  ev.preventDefault();\r\n  var itemId = $(this).attr('data-key');\r\n  $home.openTask(itemId);\r\n});\r\n\r\n$(document).on('click', '[data-action=\"delete-task\"]', function (ev){\r\n  ev.preventDefault();\r\n  var $this = $(this);\r\n  var itemId = $(this).attr('data-key');\r\n  if (confirm('Remove task?')) {\r\n    $home.deleteTask(itemId);\r\n  }\r\n});\r\n\r\n$(document).on('submit', '#taskEditModal form', function (ev) {\r\n  ev.preventDefault();\r\n  var $this = $(this);\r\n  var id = $this.find('[name=\"id\"]').val();\r\n\r\n  $.ajax({\r\n    method: 'PUT',\r\n    data: $this.serialize(),\r\n    url: './api/Task/' + id,\r\n    success: function (r) {\r\n      if (r == 1) {\r\n        $('#taskEditModal').modal('hide');\r\n        $home.loadTasks();\r\n      } else {\r\n        alert('Invalid data or no changes detected');\r\n      }\r\n    }\r\n  })\r\n});\r\n\r\n$(document).on('submit', '#formAddTask', function (ev) {\r\n  ev.preventDefault();\r\n  var $this = $(this);\r\n\r\n  $home.addTask($this.serialize());\r\n});\r\n\r\n$(document).on('keyup', '#taskSearch', function (ev) {\r\n  $home.loadTasks();\r\n});"]}